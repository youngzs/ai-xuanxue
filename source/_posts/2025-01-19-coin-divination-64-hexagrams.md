---
title: ä¸‰å¸å åœï¼šæœ€ç®€å•çš„å…­åå››å¦é¢„æµ‹æ³•
date: 2025-01-19 14:30:00
categories:
  - ç„å­¦çŸ¥è¯†
tags:
  - æ˜“ç»
  - å åœ
  - å…­åå››å¦
  - ç„å­¦é¢„æµ‹
  - ä¼ ç»Ÿæ–‡åŒ–
cover: /images/xuanxue/bagua-cover.webp
---

# ä¸‰å¸å åœï¼šæœ€ç®€å•çš„å…­åå››å¦é¢„æµ‹æ³•

åœ¨ä¸­åä¼ ç»Ÿæ–‡åŒ–ä¸­ï¼Œæ˜“ç»å åœæ˜¯ä¸€é—¨åšå¤§ç²¾æ·±çš„å­¦é—®ã€‚ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ æœ€ç®€å•æ˜“å­¦çš„ä¸‰å¸å åœæ³•ï¼Œåªéœ€è¦ä¸‰æšç¡¬å¸ï¼Œå°±èƒ½å¿«é€Ÿè·å¾—å…­åå››å¦çš„é¢„æµ‹ç»“æœã€‚

## ğŸª™ å‡†å¤‡å·¥ä½œ

### éœ€è¦çš„ç‰©å“
- **ä¸‰æšç›¸åŒçš„ç¡¬å¸**ï¼ˆå»ºè®®ä½¿ç”¨ä¸€å…ƒç¡¬å¸ï¼‰
- **å®‰é™çš„ç¯å¢ƒ**
- **è™”è¯šçš„å¿ƒæ€**

### åŸºæœ¬è§„åˆ™
- **èŠèŠ±é¢ï¼ˆå›½å¾½é¢ï¼‰= 1**
- **æ•°å­—é¢ = 2** 
- **å¥‡æ•°ä¸ºé˜³ï¼Œå¶æ•°ä¸ºé˜´**

## ğŸ“– å åœæ–¹æ³•è¯¦è§£

### ç¬¬ä¸€æ­¥ï¼šç†è§£çˆ»çš„å«ä¹‰

ä¸‰æšç¡¬å¸çš„ç»„åˆï¼Œæ ¹æ®èŠèŠ±å‡ºç°çš„æ¬¡æ•°ï¼Œå¯¹åº”ä¸åŒçš„çˆ»ï¼š

| èŠèŠ±æ•°é‡ | å˜å¦ | çˆ»è±¡ | åç§° | å«ä¹‰ |
|---------|------|------|------|------|
| 0ä¸ª | X | **âš‹** | è€é˜´ | é˜´æè½¬é˜³ï¼Œä¼šå˜å¦ |
| 1ä¸ª | - | **âšŠ** | å°‘é˜³ | ç¨³å®šçš„é˜³çˆ» |
| 2ä¸ª | - | **âš‹** | å°‘é˜´ | ç¨³å®šçš„é˜´çˆ» |
| 3ä¸ª | O | **âšŠ** | è€é˜³ | é˜³æè½¬é˜´ï¼Œä¼šå˜å¦ |

### ç¬¬äºŒæ­¥ï¼šæ‘‡å¦å…­æ¬¡

ä»ä¸‹å¾€ä¸Šï¼Œè¿ç»­æ‘‡å…­æ¬¡ç¡¬å¸ï¼š

1. **åˆçˆ»**ï¼ˆæœ€ä¸‹é¢ï¼‰- ç¬¬ä¸€æ¬¡æ‘‡å¦ç»“æœ
2. **äºŒçˆ»** - ç¬¬äºŒæ¬¡æ‘‡å¦ç»“æœ  
3. **ä¸‰çˆ»** - ç¬¬ä¸‰æ¬¡æ‘‡å¦ç»“æœ
4. **å››çˆ»** - ç¬¬å››æ¬¡æ‘‡å¦ç»“æœ
5. **äº”çˆ»** - ç¬¬äº”æ¬¡æ‘‡å¦ç»“æœ
6. **ä¸Šçˆ»**ï¼ˆæœ€ä¸Šé¢ï¼‰- ç¬¬å…­æ¬¡æ‘‡å¦ç»“æœ

### ç¬¬ä¸‰æ­¥ï¼šåˆ†æå¦è±¡

- **ä¸‹å¦**ï¼šåˆçˆ»ã€äºŒçˆ»ã€ä¸‰çˆ»ç»„æˆçš„ä¸‰çˆ»å¦
- **ä¸Šå¦**ï¼šå››çˆ»ã€äº”çˆ»ã€ä¸Šçˆ»ç»„æˆçš„ä¸‰çˆ»å¦
- **æœ¬å¦**ï¼šç”±ä¸‹å¦å’Œä¸Šå¦ç»„æˆçš„å…­çˆ»å¦
- **å˜å¦**ï¼šè€é˜´å’Œè€é˜³ä¼šå‘ç”Ÿå˜åŒ–åå½¢æˆçš„æ–°å¦

## ğŸ”® åœ¨çº¿å åœå·¥å…·

<div id="divination-tool" class="divination-container">
    <div class="tool-header">
        <h3>ğŸª™ ä¸‰å¸å åœå·¥å…·</h3>
        <p>è¯šå¿ƒæ±‚é—®ï¼ŒæŠ•æ·ä¸‰å¸ï¼Œè·å¾—å…­åå››å¦æŒ‡å¼•</p>
    </div>  
    <div class="question-input">
        <label for="question">ğŸ¤” è¯·è¾“å…¥æ‚¨è¦å é—®çš„äº‹æƒ…ï¼š</label>
        <textarea id="question" placeholder="ä¾‹å¦‚ï¼šæˆ‘è¿™æ¬¡æ±‚èŒèƒ½å¦æˆåŠŸï¼Ÿ"></textarea>
    </div>    
    <div class="mode-selection">
        <h4>ğŸ“Š é€‰æ‹©å åœæ–¹å¼</h4>
        <div class="mode-buttons">
            <button id="online-mode" class="mode-btn active">ğŸ² åœ¨çº¿æŠ•æ·</button>
            <button id="offline-mode" class="mode-btn">ğŸ“ è¾“å…¥ç»“æœ</button>
        </div>
    </div>    
    <!-- åœ¨çº¿æŠ•æ·æ¨¡å¼ -->
    <div id="online-divination" class="divination-mode">
        <div class="divination-process">
            <button id="start-divination" class="btn-primary">å¼€å§‹å åœ</button>
            <button id="throw-coins" class="btn-secondary" style="display:none;">æŠ•æ·ç¡¬å¸</button>
            <button id="reset-divination" class="btn-reset" style="display:none;">é‡æ–°å åœ</button>
        </div>    
        <div id="throwing-area" class="throwing-area" style="display:none;">
            <div class="throw-info">
                <span id="throw-count">ç¬¬ 1 æ¬¡æŠ•æ·</span>
                <span id="yao-position">ï¼ˆåˆçˆ»ï¼‰</span>
            </div>
            <div class="coins-display">
                <div class="coin" id="coin1">ğŸª™</div>
                <div class="coin" id="coin2">ğŸª™</div>
                <div class="coin" id="coin3">ğŸª™</div>
            </div>
            <div class="throw-result">
                <span id="throw-details"></span>
                <span id="yao-result"></span>
            </div>
        </div>
    </div>    
    <!-- çº¿ä¸‹è¾“å…¥æ¨¡å¼ -->
    <div id="offline-divination" class="divination-mode" style="display:none;">
        <div class="offline-input-section">
            <h4>ğŸ“‹ è¾“å…¥æ‚¨çš„æŠ•æ·ç»“æœ</h4>
            <p class="input-instruction">
                è¯·æŒ‰ä»ä¸‹åˆ°ä¸Šçš„é¡ºåºï¼ˆåˆçˆ»â†’ä¸Šçˆ»ï¼‰ï¼Œè¾“å…¥æ¯æ¬¡æŠ•æ·çš„èŠèŠ±æ•°é‡ï¼ˆ0-3ï¼‰ï¼š
            </p>
            <div class="yao-inputs">
                <div class="yao-input-row">
                    <label>ä¸Šçˆ»ï¼ˆç¬¬6æ¬¡ï¼‰ï¼š</label>
                    <input type="number" class="yao-input" min="0" max="3" data-yao="5" placeholder="0-3">
                    <span class="yao-result-display" data-yao="5"></span>
                </div>
                <div class="yao-input-row">
                    <label>äº”çˆ»ï¼ˆç¬¬5æ¬¡ï¼‰ï¼š</label>
                    <input type="number" class="yao-input" min="0" max="3" data-yao="4" placeholder="0-3">
                    <span class="yao-result-display" data-yao="4"></span>
                </div>
                <div class="yao-input-row">
                    <label>å››çˆ»ï¼ˆç¬¬4æ¬¡ï¼‰ï¼š</label>
                    <input type="number" class="yao-input" min="0" max="3" data-yao="3" placeholder="0-3">
                    <span class="yao-result-display" data-yao="3"></span>
                </div>
                <div class="yao-input-row">
                    <label>ä¸‰çˆ»ï¼ˆç¬¬3æ¬¡ï¼‰ï¼š</label>
                    <input type="number" class="yao-input" min="0" max="3" data-yao="2" placeholder="0-3">
                    <span class="yao-result-display" data-yao="2"></span>
                </div>
                <div class="yao-input-row">
                    <label>äºŒçˆ»ï¼ˆç¬¬2æ¬¡ï¼‰ï¼š</label>
                    <input type="number" class="yao-input" min="0" max="3" data-yao="1" placeholder="0-3">
                    <span class="yao-result-display" data-yao="1"></span>
                </div>
                <div class="yao-input-row">
                    <label>åˆçˆ»ï¼ˆç¬¬1æ¬¡ï¼‰ï¼š</label>
                    <input type="number" class="yao-input" min="0" max="3" data-yao="0" placeholder="0-3">
                    <span class="yao-result-display" data-yao="0"></span>
                </div>
            </div>
            <div class="offline-controls">
                <button id="generate-hexagram" class="btn-primary">ç”Ÿæˆå¦è±¡</button>
                <button id="clear-inputs" class="btn-reset">æ¸…ç©ºé‡å¡«</button>
            </div>
        </div>
    </div>    
    <!-- å¦è±¡æ˜¾ç¤ºåŒºåŸŸ -->    
    <div id="hexagram-display" class="hexagram-display" style="display:none;">
        <h4>ğŸ“œ å¦è±¡ç»“æœ</h4>
        <div class="hexagram-visual">
            <div class="hexagram-lines" id="hexagram-lines"></div>
            <div class="hexagram-info">
                <div class="hexagram-name" id="hexagram-name"></div>
                <div class="hexagram-composition">
                    <span id="upper-trigram"></span> ä¸Šå¦ / <span id="lower-trigram"></span> ä¸‹å¦
                </div>
            </div>
        </div>
    </div>    
    <div id="interpretation" class="interpretation" style="display:none;">
        <h4>ğŸ” å¦è±¡è§£è¯»</h4>
        <div class="interpretation-content" id="interpretation-content"></div>        
        <div id="change-hexagram" class="change-hexagram" style="display:none;">
            <h5>ğŸ”„ å˜å¦</h5>
            <div class="change-info" id="change-info"></div>
        </div>
    </div>
</div>

## ğŸ“š å…­åå››å¦ç®€è¦è¯´æ˜

### å…«å¦åŸºç¡€

| å¦å | å¦è±¡ | è‡ªç„¶è±¡å¾ | æ–¹ä½ | ç‰¹æ€§ |
|------|------|----------|------|------|
| ä¹¾ | â˜° | å¤© | è¥¿åŒ— | åˆšå¥ã€è¿›å– |
| å¤ | â˜· | åœ° | è¥¿å— | æŸ”é¡ºã€åŒ…å®¹ |
| éœ‡ | â˜³ | é›· | ä¸œ | åŠ¨ã€è¿› |
| å·½ | â˜´ | é£ | ä¸œå— | å…¥ã€é¡º |
| å | â˜µ | æ°´ | åŒ— | é™©ã€é™· |
| ç¦» | â˜² | ç« | å— | ä¸½ã€æ˜ |
| è‰® | â˜¶ | å±± | ä¸œåŒ— | æ­¢ã€é™ |
| å…‘ | â˜± | æ³½ | è¥¿ | æ‚¦ã€è¯´ |

### ç»å…¸å¦ä¾‹è§£æ

#### 1. ä¹¾ä¸ºå¤©ï¼ˆâ˜°â˜°ï¼‰
- **å¦æ„**ï¼šçº¯é˜³ä¹‹å¦ï¼Œè±¡å¾å¤©é“åˆšå¥
- **å æ–­**ï¼šå¤§å‰ï¼Œå›å­ä»¥è‡ªå¼ºä¸æ¯
- **äº‹ä¸š**ï¼šå¯å¤§å±•å®å›¾ï¼Œä½†éœ€æŒä¹‹ä»¥æ’
- **æ„Ÿæƒ…**ï¼šä¸»åŠ¨è¿½æ±‚ï¼Œè¯šæ„æ„Ÿäºº

#### 2. å¤ä¸ºåœ°ï¼ˆâ˜·â˜·ï¼‰  
- **å¦æ„**ï¼šçº¯é˜´ä¹‹å¦ï¼Œè±¡å¾å¤§åœ°åŒ…å®¹
- **å æ–­**ï¼šä»¥æŸ”å…‹åˆšï¼Œåšå¾·è½½ç‰©
- **äº‹ä¸š**ï¼šå®œå®ˆä¸å®œæ”»ï¼Œç¨³æ‰ç¨³æ‰“
- **æ„Ÿæƒ…**ï¼šæ¸©æŸ”ä½“è´´ï¼Œæ„Ÿæƒ…æ·±åš

#### 3. æ°´é›·å±¯ï¼ˆâ˜µâ˜³ï¼‰
- **å¦æ„**ï¼šä¸‡ç‰©å§‹ç”Ÿï¼Œè‰°éš¾åˆ›ä¸š
- **å æ–­**ï¼šåˆæœŸå›°éš¾ï¼Œéœ€è¦åšæŒ
- **äº‹ä¸š**ï¼šåˆ›ä¸šç»´è‰°ï¼Œä½†å‰æ™¯å…‰æ˜
- **æ„Ÿæƒ…**ï¼šæ„Ÿæƒ…èŒèŠ½ï¼Œéœ€è¦æ—¶é—´

## âš ï¸ å åœæ³¨æ„äº‹é¡¹

### å åœå‰å‡†å¤‡
1. **å¿ƒå¢ƒå¹³å’Œ**ï¼šä¿æŒè™”è¯šã€ä¸“æ³¨çš„å¿ƒæ€
2. **ç¯å¢ƒå®‰é™**ï¼šé€‰æ‹©æ— äººæ‰“æ‰°çš„åœ°æ–¹
3. **é—®é¢˜æ˜ç¡®**ï¼šè¦å é—®çš„äº‹æƒ…è¦å…·ä½“æ¸…æ™°
4. **ä¸€äº‹ä¸€å **ï¼šä¸€æ¬¡åªèƒ½é—®ä¸€ä»¶äº‹

### å åœç¦å¿Œ
- âŒ ä¸è¦è¿ç»­å¤šæ¬¡å åŒä¸€ä»¶äº‹
- âŒ ä¸è¦åœ¨æƒ…ç»ªæ¿€åŠ¨æ—¶å åœ  
- âŒ ä¸è¦å é—®ä»–äººéšç§
- âŒ ä¸è¦å é—®è¿æ³•çŠ¯ç½ªçš„äº‹

### ç»“æœè§£è¯»
- ğŸ”® **æœ¬å¦**ï¼šåæ˜ å½“å‰çŠ¶å†µ
- ğŸ”„ **å˜å¦**ï¼šæ˜¾ç¤ºäº‹æƒ…çš„å‘å±•è¶‹åŠ¿
- âš¡ **åŠ¨çˆ»**ï¼šæŒ‡å‡ºå…³é”®çš„å˜åŒ–ç‚¹
- ğŸ“ **å¦è¾**ï¼šç»™å‡ºè¡ŒåŠ¨æŒ‡å¯¼

## ğŸ¯ å®æˆ˜æŠ€å·§

### æé—®çš„è‰ºæœ¯
- **å…·ä½“åŒ–**ï¼šä¸é—®"æˆ‘ä¼šæ€æ ·"ï¼Œè¦é—®"æˆ‘åœ¨æŸæ–¹é¢ä¼šæ€æ ·"
- **æ—¶é™æ€§**ï¼šè®¾å®šæ—¶é—´èŒƒå›´ï¼Œå¦‚"ä¸‰ä¸ªæœˆå†…"
- **å¯æ“ä½œ**ï¼šé—®é¢˜è¦èƒ½é€šè¿‡è¡ŒåŠ¨æ”¹å˜

### è§£å¦è¦é¢†
1. **çœ‹æ•´ä½“å¦è±¡**ï¼šäº†è§£å¤§è‡´è¶‹åŠ¿
2. **åˆ†æåŠ¨çˆ»**ï¼šæ‰¾å‡ºå…³é”®å˜åŒ–
3. **ç»“åˆç°å®**ï¼šè”ç³»å®é™…æƒ…å†µ
4. **æŒ‡å¯¼è¡ŒåŠ¨**ï¼šåˆ¶å®šåº”å¯¹ç­–ç•¥

## ğŸŒŸ ç»“è¯­

ä¸‰å¸å åœæ³•æ˜¯æ˜“ç»å åœä¸­æœ€ç®€å•å®ç”¨çš„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒä¸éœ€è¦å¤æ‚çš„å·¥å…·å’Œç¹ççš„ç¨‹åºï¼Œåªè¦è¯šå¿ƒæ±‚é—®ï¼Œå°±èƒ½è·å¾—æœ‰ä»·å€¼çš„æŒ‡å¼•ã€‚

è®°ä½ï¼Œå åœçš„ç›®çš„ä¸æ˜¯é¢„çŸ¥å‘½è¿ï¼Œè€Œæ˜¯å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°è®¤è¯†ç°çŠ¶ï¼Œåšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚æ­£å¦‚ã€Šæ˜“ç»ã€‹æ‰€è¯´ï¼š"å›å­ä»¥è‡ªå¼ºä¸æ¯"ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦é è‡ªå·±çš„åŠªåŠ›å»åˆ›é€ ç¾å¥½çš„æœªæ¥ã€‚

**æ„¿æ‚¨åœ¨äººç”Ÿçš„é“è·¯ä¸Šï¼Œå¾—åˆ°æ™ºæ…§çš„æŒ‡å¼•ï¼Œåšå‡ºæ­£ç¡®çš„æŠ‰æ‹©ï¼**

---

<style>
/* å åœå·¥å…·æ ·å¼ */
.divination-container {
    background: #f8f9fa;
    border-radius: 15px;
    padding: 2rem;
    margin: 2rem 0;
    border: 2px solid #e9ecef;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.tool-header {
    text-align: center;
    margin-bottom: 2rem;
}

.tool-header h3 {
    color: #2c3e50;
    margin-bottom: 0.5rem;
    font-size: 1.8rem;
}

.tool-header p {
    color: #6c757d;
    font-size: 1rem;
}

.question-input {
    margin-bottom: 2rem;
}

.question-input label {
    display: block;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 0.5rem;
}

.question-input textarea {
    width: 100%;
    padding: 1rem;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    font-size: 1rem;
    resize: vertical;
    min-height: 80px;
}

.question-input textarea:focus {
    outline: none;
    border-color: #3498db;
}

/* æ¨¡å¼é€‰æ‹©æ ·å¼ */
.mode-selection {
    margin-bottom: 2rem;
    text-align: center;
}

.mode-selection h4 {
    color: #2c3e50;
    margin-bottom: 1rem;
    font-size: 1.2rem;
}

.mode-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
}

.mode-btn {
    padding: 0.8rem 1.5rem;
    border: 2px solid #e9ecef;
    border-radius: 25px;
    background: white;
    color: #6c757d;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.mode-btn.active {
    background: #3498db;
    color: white;
    border-color: #3498db;
}

.mode-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

/* çº¿ä¸‹è¾“å…¥æ¨¡å¼æ ·å¼ */
.offline-input-section {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    margin: 1rem 0;
    border: 2px solid #3498db;
}

.offline-input-section h4 {
    color: #2c3e50;
    margin-bottom: 1rem;
    text-align: center;
}

.input-instruction {
    color: #6c757d;
    text-align: center;
    margin-bottom: 2rem;
    font-size: 0.95rem;
    line-height: 1.5;
}

.yao-inputs {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
}

.yao-input-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.8rem;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.yao-input-row label {
    min-width: 120px;
    font-weight: 600;
    color: #2c3e50;
    font-size: 0.95rem;
}

.yao-input {
    width: 60px;
    padding: 0.5rem;
    border: 2px solid #e9ecef;
    border-radius: 6px;
    text-align: center;
    font-size: 1rem;
    font-weight: 600;
}

.yao-input:focus {
    outline: none;
    border-color: #3498db;
}

.yao-result-display {
    min-width: 120px;
    padding: 0.3rem 0.8rem;
    background: #e3f2fd;
    border-radius: 15px;
    font-size: 0.9rem;
    font-weight: 600;
    color: #1976d2;
    text-align: center;
}

.offline-controls {
    display: flex;
    justify-content: center;
    gap: 1rem;
}

.divination-process {
    text-align: center;
    margin-bottom: 2rem;
}

.btn-primary,
.btn-secondary,
.btn-reset {
    padding: 0.8rem 2rem;
    border: none;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin: 0 0.5rem;
    font-size: 1rem;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

.btn-secondary {
    background: #28a745;
    color: white;
}

.btn-reset {
    background: #6c757d;
    color: white;
}

.btn-primary:hover,
.btn-secondary:hover,
.btn-reset:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.throwing-area {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    margin: 1rem 0;
    text-align: center;
    border: 2px dashed #3498db;
}

.throw-info {
    margin-bottom: 1rem;
    font-size: 1.2rem;
    font-weight: 600;
    color: #2c3e50;
}

.coins-display {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin: 2rem 0;
}

.coin {
    font-size: 4rem;
    animation: flip 0.6s ease-in-out;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.coin:hover {
    transform: scale(1.1);
}

@keyframes flip {
    0% { transform: rotateY(0deg); }
    50% { transform: rotateY(90deg); }
    100% { transform: rotateY(0deg); }
}

.throw-result {
    margin-top: 1rem;
    padding: 1rem;
    background: #e3f2fd;
    border-radius: 8px;
    border-left: 4px solid #2196f3;
}

.hexagram-display {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    margin: 1rem 0;
    border: 2px solid #f39c12;
}

.hexagram-visual {
    display: flex;
    align-items: center;
    gap: 2rem;
    justify-content: center;
}

.hexagram-lines {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    font-family: monospace;
    font-size: 2rem;
}

.hexagram-info {
    text-align: center;
}

.hexagram-name {
    font-size: 2rem;
    font-weight: bold;
    color: #d35400;
    margin-bottom: 0.5rem;
}

.hexagram-composition {
    color: #7f8c8d;
    font-size: 1rem;
}

.interpretation {
    background: #fff8e1;
    border-radius: 12px;
    padding: 2rem;
    margin: 1rem 0;
    border: 2px solid #ffc107;
}

.interpretation h4,
.interpretation h5 {
    color: #e65100;
    margin-bottom: 1rem;
}

.interpretation-content {
    line-height: 1.8;
    color: #2c3e50;
}

.change-hexagram {
    margin-top: 2rem;
    padding-top: 2rem;
    border-top: 2px dashed #ffc107;
}

.detailed-interpretation {
    margin-top: 2rem;
    padding: 1.5rem;
    background: #f0f8ff;
    border-radius: 8px;
    border-left: 4px solid #3498db;
}

.interpretation-section {
    margin-bottom: 1.5rem;
}

.interpretation-section h6 {
    color: #2c3e50;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
    font-weight: 600;
}

.interpretation-section p {
    margin-bottom: 0.5rem;
    color: #555;
}

/* æ·±è‰²æ¨¡å¼æ”¯æŒ */
@media (prefers-color-scheme: dark) {
    .divination-container {
        background: #2d3748;
        border-color: #4a5568;
    }
    
    .tool-header h3 {
        color: #e2e8f0;
    }
    
    .tool-header p {
        color: #a0aec0;
    }
    
    .question-input label {
        color: #e2e8f0;
    }
    
    .question-input textarea {
        background: #374151;
        border-color: #4a5568;
        color: #e2e8f0;
    }
    
    .question-input textarea:focus {
        border-color: #63b3ed;
    }
    
    .mode-selection h4 {
        color: #e2e8f0;
    }
    
    .mode-btn {
        background: #374151;
        border-color: #4a5568;
        color: #a0aec0;
    }
    
    .mode-btn.active {
        background: #63b3ed;
        color: #1a202c;
        border-color: #63b3ed;
    }
    
    .offline-input-section {
        background: #374151;
        border-color: #63b3ed;
    }
    
    .offline-input-section h4 {
        color: #e2e8f0;
    }
    
    .input-instruction {
        color: #a0aec0;
    }
    
    .yao-input-row {
        background: #2d3748;
        border-color: #4a5568;
    }
    
    .yao-input-row label {
        color: #e2e8f0;
    }
    
    .yao-input {
        background: #1a202c;
        border-color: #4a5568;
        color: #e2e8f0;
    }
    
    .yao-input:focus {
        border-color: #63b3ed;
    }
    
    .yao-result-display {
        background: #1e3a8a;
        color: #93c5fd;
    }
    
    .throwing-area {
        background: #374151;
        border-color: #63b3ed;
    }
    
    .throw-info {
        color: #e2e8f0;
    }
    
    .throw-result {
        background: #1e3a8a;
        border-color: #3b82f6;
        color: #e2e8f0;
    }
    
    .hexagram-display {
        background: #374151;
        border-color: #f59e0b;
    }
    
    .hexagram-name {
        color: #fbbf24;
    }
    
    .hexagram-composition {
        color: #9ca3af;
    }
    
    .interpretation {
        background: #365314;
        border-color: #eab308;
    }
    
    .interpretation h4,
    .interpretation h5 {
        color: #fbbf24;
    }
    
    .interpretation-content {
        color: #e2e8f0;
    }
    
    .detailed-interpretation {
        background: #1e3a8a;
        border-color: #3b82f6;
    }
    
    .interpretation-section h6 {
        color: #e2e8f0;
    }
    
    .interpretation-section p {
        color: #cbd5e0;
    }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .hexagram-visual {
        flex-direction: column;
        gap: 1rem;
    }
    
    .coins-display {
        gap: 1rem;
    }
    
    .coin {
        font-size: 3rem;
    }
    
    .divination-container {
        padding: 1.5rem;
    }
    
    .mode-buttons {
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
    }
    
    .mode-btn {
        width: 100%;
        max-width: 200px;
    }
    
    .yao-input-row {
        flex-direction: column;
        text-align: center;
        gap: 0.5rem;
    }
    
    .yao-input-row label {
        min-width: auto;
    }
    
    .yao-result-display {
        min-width: auto;
        width: 100%;
    }
    
    .offline-controls {
        flex-direction: column;
        align-items: center;
    }
    
    .btn-primary,
    .btn-secondary,
    .btn-reset {
        width: 100%;
        max-width: 200px;
        margin: 0.25rem 0;
    }
}
</style>

<script src="/js/hexagram-database.js"></script>
<script>
// ä¸‰å¸å åœå·¥å…·è„šæœ¬ï¼ˆæ”¹è¿›ç‰ˆï¼‰
document.addEventListener('DOMContentLoaded', function() {
    initDivinationTool();
});

function initDivinationTool() {
    // å·¥å…·å˜é‡
    let currentThrow = 0;
    let hexagramLines = [];
    let question = '';
    let currentMode = 'online'; // 'online' æˆ– 'offline'
    
    // çˆ»ä½åç§°
    const yaoPositions = ['åˆçˆ»', 'äºŒçˆ»', 'ä¸‰çˆ»', 'å››çˆ»', 'äº”çˆ»', 'ä¸Šçˆ»'];
    
    // è·å–DOMå…ƒç´ 
    const startBtn = document.getElementById('start-divination');
    const throwBtn = document.getElementById('throw-coins');
    const resetBtn = document.getElementById('reset-divination');
    const questionInput = document.getElementById('question');
    const throwingArea = document.getElementById('throwing-area');
    const hexagramDisplay = document.getElementById('hexagram-display');
    const interpretation = document.getElementById('interpretation');
    
    // æ¨¡å¼åˆ‡æ¢ç›¸å…³å…ƒç´ 
    const onlineModeBtn = document.getElementById('online-mode');
    const offlineModeBtn = document.getElementById('offline-mode');
    const onlineDivination = document.getElementById('online-divination');
    const offlineDivination = document.getElementById('offline-divination');
    const generateHexagramBtn = document.getElementById('generate-hexagram');
    const clearInputsBtn = document.getElementById('clear-inputs');
    const yaoInputs = document.querySelectorAll('.yao-input');
    const yaoResultDisplays = document.querySelectorAll('.yao-result-display');
    
    // åˆå§‹åŒ–
    initEventListeners();
    
    function initEventListeners() {
        // æ¨¡å¼åˆ‡æ¢
        onlineModeBtn.addEventListener('click', () => switchMode('online'));
        offlineModeBtn.addEventListener('click', () => switchMode('offline'));
        
        // åœ¨çº¿æ¨¡å¼äº‹ä»¶
        startBtn.addEventListener('click', startOnlineDivination);
        throwBtn.addEventListener('click', throwCoins);
        resetBtn.addEventListener('click', resetTool);
        
        // çº¿ä¸‹æ¨¡å¼äº‹ä»¶
        generateHexagramBtn.addEventListener('click', generateHexagramFromInput);
        clearInputsBtn.addEventListener('click', clearOfflineInputs);
        
        // çˆ»è¾“å…¥å®æ—¶é¢„è§ˆ
        yaoInputs.forEach((input, index) => {
            input.addEventListener('input', (e) => updateYaoDisplay(e.target, index));
        });
    }
    
    // æ¨¡å¼åˆ‡æ¢
    function switchMode(mode) {
        currentMode = mode;
        
        if (mode === 'online') {
            onlineModeBtn.classList.add('active');
            offlineModeBtn.classList.remove('active');
            onlineDivination.style.display = 'block';
            offlineDivination.style.display = 'none';
        } else {
            onlineModeBtn.classList.remove('active');
            offlineModeBtn.classList.add('active');
            onlineDivination.style.display = 'none';
            offlineDivination.style.display = 'block';
        }
        
        // é‡ç½®çŠ¶æ€
        resetDisplays();
    }
    
    // é‡ç½®æ˜¾ç¤º
    function resetDisplays() {
        hexagramDisplay.style.display = 'none';
        interpretation.style.display = 'none';
        document.getElementById('change-hexagram').style.display = 'none';
    }
    
    // èŠèŠ±æ•°é‡è½¬æ¢ä¸ºçˆ»ç±»å‹
    function flowerCountToYaoType(count) {
        switch (count) {
            case 0: return { type: 'old_yin', symbol: 'âš‹', name: 'è€é˜´ï¼ˆå˜ï¼‰', changing: true };
            case 1: return { type: 'young_yang', symbol: 'âšŠ', name: 'å°‘é˜³', changing: false };
            case 2: return { type: 'young_yin', symbol: 'âš‹', name: 'å°‘é˜´', changing: false };
            case 3: return { type: 'old_yang', symbol: 'âšŠ', name: 'è€é˜³ï¼ˆå˜ï¼‰', changing: true };
            default: return null;
        }
    }
    
    // æ›´æ–°çˆ»æ˜¾ç¤º
    function updateYaoDisplay(input, index) {
        const value = parseInt(input.value);
        const display = yaoResultDisplays[index];
        
        if (isNaN(value) || value < 0 || value > 3) {
            display.textContent = '';
            display.style.display = 'none';
            return;
        }
        
        const yaoInfo = flowerCountToYaoType(value);
        if (yaoInfo) {
            display.textContent = `${yaoInfo.symbol} ${yaoInfo.name}`;
            display.style.display = 'inline-block';
            display.style.color = yaoInfo.changing ? '#e74c3c' : '#1976d2';
        }
    }
    
    // ä»è¾“å…¥ç”Ÿæˆå¦è±¡
    function generateHexagramFromInput() {
        question = questionInput.value.trim();
        if (!question) {
            alert('è¯·å…ˆè¾“å…¥æ‚¨è¦å é—®çš„é—®é¢˜ï¼');
            return;
        }
        
        // æ”¶é›†æ‰€æœ‰è¾“å…¥å€¼
        const inputs = [];
        let hasEmptyInput = false;
        
        yaoInputs.forEach((input) => {
            const value = parseInt(input.value);
            if (isNaN(value) || value < 0 || value > 3) {
                hasEmptyInput = true;
                return;
            }
            inputs[parseInt(input.dataset.yao)] = value;
        });
        
        if (hasEmptyInput || inputs.length !== 6) {
            alert('è¯·å¡«å†™å®Œæ•´çš„å…­æ¬¡æŠ•æ·ç»“æœï¼ˆæ¯ä¸ªéƒ½è¦è¾“å…¥0-3çš„æ•°å­—ï¼‰ï¼');
            return;
        }
        
        // æ„å»ºhexagramLinesæ•°ç»„ï¼ˆæŒ‰ä»ä¸‹åˆ°ä¸Šçš„é¡ºåºï¼šåˆçˆ»åˆ°ä¸Šçˆ»ï¼‰
        hexagramLines = [];
        for (let i = 0; i < 6; i++) {
            const flowerCount = inputs[i];
            const yaoInfo = flowerCountToYaoType(flowerCount);
            
            hexagramLines.push({
                type: yaoInfo.type,
                symbol: yaoInfo.symbol,
                name: yaoInfo.name,
                flowerCount: flowerCount,
                changing: yaoInfo.changing
            });
        }
        
        // ç”Ÿæˆå¹¶æ˜¾ç¤ºå¦è±¡
        processHexagramResult();
    }
    
    // æ¸…ç©ºçº¿ä¸‹è¾“å…¥
    function clearOfflineInputs() {
        yaoInputs.forEach(input => {
            input.value = '';
        });
        yaoResultDisplays.forEach(display => {
            display.textContent = '';
            display.style.display = 'none';
        });
        resetDisplays();
    }
    
    // å¼€å§‹åœ¨çº¿å åœ
    function startOnlineDivination() {
        question = questionInput.value.trim();
        if (!question) {
            alert('è¯·å…ˆè¾“å…¥æ‚¨è¦å é—®çš„é—®é¢˜ï¼');
            return;
        }
        
        startBtn.style.display = 'none';
        throwBtn.style.display = 'inline-block';
        resetBtn.style.display = 'inline-block';
        throwingArea.style.display = 'block';
        
        currentThrow = 0;
        hexagramLines = [];
        updateThrowInfo();
    }
    
    // æŠ•æ·ç¡¬å¸
    function throwCoins() {
        if (currentThrow >= 6) return;
        
        // æ¨¡æ‹ŸæŠ•æ·ä¸‰æšç¡¬å¸
        const coins = [
            Math.random() < 0.5 ? 1 : 2, // èŠèŠ±=1, æ•°å­—=2
            Math.random() < 0.5 ? 1 : 2,
            Math.random() < 0.5 ? 1 : 2
        ];
        
        // æ˜¾ç¤ºç¡¬å¸åŠ¨ç”»
        animateCoins(coins);
        
        // è®¡ç®—ç»“æœ
        const flowerCount = coins.filter(c => c === 1).length;
        const yaoInfo = flowerCountToYaoType(flowerCount);
        
        hexagramLines.push({
            type: yaoInfo.type,
            symbol: yaoInfo.symbol,
            name: yaoInfo.name,
            coins: coins,
            flowerCount: flowerCount,
            changing: yaoInfo.changing
        });
        
        // æ˜¾ç¤ºç»“æœ
        setTimeout(() => {
            displayThrowResult(coins, flowerCount, yaoInfo.name);
            
            currentThrow++;
            if (currentThrow < 6) {
                updateThrowInfo();
            } else {
                processHexagramResult();
            }
        }, 1000);
    }
    
    // å¤„ç†å¦è±¡ç»“æœï¼ˆé€šç”¨å‡½æ•°ï¼‰
    function processHexagramResult() {
        if (currentMode === 'online') {
            throwBtn.style.display = 'none';
        }
        
        // ç”Ÿæˆå¦è±¡ä»£ç 
        const hexagramCode = HexagramDatabase.generateHexagramCode(hexagramLines);
        
        // åˆ†æä¸Šä¸‹å¦
        const lowerTrigram = hexagramCode.substring(0, 3);
        const upperTrigram = hexagramCode.substring(3, 6);
        
        const lowerTrigramInfo = HexagramDatabase.getTrigram(lowerTrigram);
        const upperTrigramInfo = HexagramDatabase.getTrigram(upperTrigram);
        
        // æŸ¥æ‰¾å…­åå››å¦
        const hexagramInfo = HexagramDatabase.getHexagram(hexagramCode);
        
        // æ˜¾ç¤ºå¦è±¡
        displayHexagram(hexagramInfo, upperTrigramInfo, lowerTrigramInfo);
        
        // æ˜¾ç¤ºè¯¦ç»†è§£é‡Š
        displayDetailedInterpretation(hexagramInfo);
    }
    
    // é‡æ–°å¼€å§‹
    function resetTool() {
        if (currentMode === 'online') {
            startBtn.style.display = 'inline-block';
            throwBtn.style.display = 'none';
            resetBtn.style.display = 'none';
            throwingArea.style.display = 'none';
        } else {
            clearOfflineInputs();
        }
        
        resetDisplays();
        currentThrow = 0;
        hexagramLines = [];
        questionInput.value = '';
    }
    
    // æ›´æ–°æŠ•æ·ä¿¡æ¯
    function updateThrowInfo() {
        document.getElementById('throw-count').textContent = `ç¬¬ ${currentThrow + 1} æ¬¡æŠ•æ·`;
        document.getElementById('yao-position').textContent = `ï¼ˆ${yaoPositions[currentThrow]}ï¼‰`;
    }
    
    // ç¡¬å¸åŠ¨ç”»
    function animateCoins(coins) {
        const coinElements = [
            document.getElementById('coin1'),
            document.getElementById('coin2'),
            document.getElementById('coin3')
        ];
        
        coinElements.forEach((coin, index) => {
            coin.style.animation = 'none';
            coin.offsetHeight; // è§¦å‘é‡ç»˜
            coin.style.animation = 'flip 0.6s ease-in-out';
            
            setTimeout(() => {
                coin.textContent = coins[index] === 1 ? 'ğŸŒ¸' : 'ğŸ”¢';
            }, 300);
        });
    }
    
    // æ˜¾ç¤ºæŠ•æ·ç»“æœ
    function displayThrowResult(coins, flowerCount, yaoName) {
        const details = `ç¡¬å¸ç»“æœï¼š${coins.map(c => c === 1 ? 'èŠ' : 'æ•°').join('-')} | èŠèŠ±${flowerCount}ä¸ª`;
        document.getElementById('throw-details').textContent = details;
        document.getElementById('yao-result').textContent = `â†’ ${yaoName}`;
    }
    
    // æ˜¾ç¤ºå¦è±¡
    function displayHexagram(hexagramInfo, upperTrigram, lowerTrigram) {
        const hexagramLinesElement = document.getElementById('hexagram-lines');
        hexagramLinesElement.innerHTML = '';
        
        // ä»ä¸Šåˆ°ä¸‹æ˜¾ç¤ºçˆ»ï¼ˆä¸æŠ•æ·é¡ºåºç›¸åï¼‰
        for (let i = 5; i >= 0; i--) {
            const line = document.createElement('div');
            line.textContent = hexagramLines[i].symbol;
            if (hexagramLines[i].changing) {
                line.style.color = '#e74c3c';
                line.style.fontWeight = 'bold';
                line.title = hexagramLines[i].name;
            }
            hexagramLinesElement.appendChild(line);
        }
        
        document.getElementById('hexagram-name').textContent = hexagramInfo.name;
        document.getElementById('upper-trigram').textContent = `${upperTrigram.symbol} ${upperTrigram.name}`;
        document.getElementById('lower-trigram').textContent = `${lowerTrigram.symbol} ${lowerTrigram.name}`;
        
        hexagramDisplay.style.display = 'block';
    }
    
    // æ˜¾ç¤ºè¯¦ç»†è§£é‡Š
    function displayDetailedInterpretation(hexagramInfo) {
        const content = `
            <div class="interpretation-section">
                <h6>ğŸ¤” æ‚¨çš„é—®é¢˜</h6>
                <p>${question}</p>
            </div>
            
            <div class="interpretation-section">
                <h6>ğŸ“– å¦è±¡å«ä¹‰</h6>
                <p>${hexagramInfo.description}</p>
            </div>
            
            <div class="detailed-interpretation">
                <div class="interpretation-section">
                    <h6>ğŸ¯ æ€»ä½“åˆ¤æ–­</h6>
                    <p>${hexagramInfo.judgment}</p>
                </div>
                
                <div class="interpretation-section">
                    <h6>ğŸ’¼ äº‹ä¸šè´¢è¿</h6>
                    <p>${hexagramInfo.business}</p>
                </div>
                
                <div class="interpretation-section">
                    <h6>ğŸ’• æ„Ÿæƒ…å©šå§»</h6>
                    <p>${hexagramInfo.love}</p>
                </div>
                
                <div class="interpretation-section">
                    <h6>ğŸ¥ å¥åº·çŠ¶å†µ</h6>
                    <p>${hexagramInfo.health}</p>
                </div>
                
                <div class="interpretation-section">
                    <h6>ğŸ’¡ è¡ŒåŠ¨å»ºè®®</h6>
                    <p>${hexagramInfo.advice}</p>
                </div>
            </div>
        `;
        
        document.getElementById('interpretation-content').innerHTML = content;
        interpretation.style.display = 'block';
        
        // æ£€æŸ¥æ˜¯å¦æœ‰å˜å¦
        const changingLines = hexagramLines.filter(line => line.changing);
        
        if (changingLines.length > 0) {
            displayChangeHexagram(changingLines);
        }
    }
    
    // æ˜¾ç¤ºå˜å¦
    function displayChangeHexagram(changingLines) {
        const changeHexagram = HexagramDatabase.getChangeHexagram(hexagramLines);
        
        const changeInfo = `
            <p><strong>å˜çˆ»åˆ†æï¼š</strong>æ‚¨çš„å¦è±¡ä¸­æœ‰ ${changingLines.length} ä¸ªå˜çˆ»ï¼Œè¡¨ç¤ºäº‹æƒ…ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
            <p><strong>å˜å¦ï¼š</strong>${changeHexagram.name}</p>
            <p><strong>å˜åŒ–è¶‹åŠ¿ï¼š</strong>${changeHexagram.description}</p>
            <p><strong>å‘å±•å»ºè®®ï¼š</strong>è€é˜´è½¬é˜³ï¼Œè€é˜³è½¬é˜´ï¼Œé¢„ç¤ºç€äº‹ç‰©çš„å‘å±•ä¼šæœ‰æ–°çš„è½¬æœºã€‚è¦é¡ºåº”å˜åŒ–ï¼ŒæŠŠæ¡æ—¶æœºã€‚</p>
        `;
        
        document.getElementById('change-info').innerHTML = changeInfo;
        document.getElementById('change-hexagram').style.display = 'block';
    }
}
</script> 